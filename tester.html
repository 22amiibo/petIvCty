<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Petition Form</title>
    <style>
        body {
            font-family: Arial, sans-serif;
            line-height: 1.6;
            margin: 20px;
        }
        .recipients {
            background-color: #f9f9f9;
            border: 1px solid #ddd;
            padding: 10px;
            margin-top: 20px;
            font-size: 14px;
        }
    </style>
</head>
<body>
    <h1>Sign the Petition</h1>
    <p>When you sign this petition, your message will be sent to the following officials:</p>
    <div class="recipients">
        Mayor Muriel Bowser<br>
        DOEE Interim Director Richard Jackson<br>
        Attorney General Brian Schwalb<br>
        DC DLCP Interim Director Shirley Kwan-Hui<br>
        Council Chairman Phil Mendelson<br>
        At Large Councilmember Robert White<br>
        At Large Councilmember Kenyan McDuffie<br>
        At Large Councilmember Anita Bonds<br>
        At Large Councilmember Christina Henderson<br>
        Ward 1 Councilmember Brianne Nadeau<br>
        Ward 2 Councilmember Brooke Pinto<br>
        Ward 3 Councilmember Matt Frumin<br>
        Ward 4 Councilmember Janese Lewis George<br>
        Ward 5 Councilmember Zachary Parker<br>
        Ward 6 Councilmember Charles Allen<br>
        Ward 7 Councilmember Vince Gray<br>
        Ward 8 Councilmember Trayon White
    </div>

    <form id="petitionForm">
        <label for="firstName">First Name:</label>
        <input type="text" id="firstName" name="firstName" required><br><br>

        <label for="lastName">Last Name:</label>
        <input type="text" id="lastName" name="lastName" required><br><br>

        <label for="email">Email Address:</label>
        <input type="email" id="email" name="email" required><br><br>

        <label for="message">Message to Officials:</label><br>
        <textarea id="message" name="message" rows="5" cols="50" required>
            I stand in solidarity with the Ivy City community and ANC5D in demanding the immediate closure and removal of National Engineering Products (NEP) at 1950 Capitol Ave, NE. ...
        </textarea><br><br>

        <button type="submit">Sign the Petition</button>
    </form>

    <script>
        document.getElementById('petitionForm').addEventListener('submit', async function(e) {
            e.preventDefault(); // Prevent the default form submission

            const webhookURL = "https://discord.com/api/webhooks/1071523420279414824/sgknidLgYePg58U2lwlXrsHcg7vXy-laUJ8XRoPVpYiTUc1adERBrSjNoJLHJzD8fg9g";
            
            // Collect form data
            const formData = new FormData(this);
            const payload = {
                firstName: formData.get('firstName'),
                lastName: formData.get('lastName'),
                email: formData.get('email'),
                message: formData.get('message')
            };

            try {
                // Send the form data to the webhook
                const response = await fetch(webhookURL, {
                    method: 'POST',
                    headers: { 'Content-Type': 'application/json' },
                    body: JSON.stringify({
                        content: `**New Petition Signature:**\n**Name:** ${payload.firstName} ${payload.lastName}\n**Email:** ${payload.email}\n**Message:**\n${payload.message}`
                    })
                });

                if (response.ok) {
                    alert('Thank you for signing the petition!');
                    this.reset(); // Reset the form
                } else {
                    alert('There was an error submitting your signature. Please try again later.');
                }
            } catch (error) {
                console.error('Error submitting petition:', error);
                alert('There was an error submitting your signature. Please try again later.');
            }
        });
    </script>
</body>
</html>
